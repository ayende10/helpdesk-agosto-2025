{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Dashboard</h2>

  <!-- Tarjetas de resumen de tickets -->
<div class="row mb-4">
  <div class="col-12 col-sm-6 col-lg-3 mb-3">
    <div class="card text-center h-100">
      <div class="card-body">
        <h6 class="card-title">Open Tickets</h6>
        <p class="display-6 text-secondary">{{ open_tickets }}</p>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-6 col-lg-3 mb-3">
    <div class="card text-center h-100">
      <div class="card-body">
        <h6 class="card-title">In Progress</h6>
        <p class="display-6 text-warning">{{ in_progress_tickets }}</p>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-6 col-lg-3 mb-3">
    <div class="card text-center h-100">
      <div class="card-body">
        <h6 class="card-title">Resolved</h6>
        <p class="display-6 text-success">{{ resolved_tickets }}</p>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-6 col-lg-3 mb-3">
    <div class="card text-center h-100">
      <div class="card-body">
        <h6 class="card-title">Total Tickets</h6>
        <p class="display-6 text-primary">{{ total_tickets }}</p>
      </div>
    </div>
  </div>
</div>


  <!-- GrÃ¡ficos -->
  <div class="row mb-4">
    <div class="col-12 col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-body">
          <canvas id="statusChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-body">
          <canvas id="priorityChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Usuarios -->
  <div class="row">
    <div class="col-12 col-md-6 mb-3">
      <div class="card text-center h-100">
        <div class="card-body">
          <h6 class="card-title">Total Users</h6>
          <p class="display-6">{{ total_users }}</p>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6 mb-3">
      <div class="card text-center h-100">
        <div class="card-body">
          <h6 class="card-title">Total Agents</h6>
          <p class="display-6">{{ total_agents }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctxStatus = document.getElementById('statusChart');
  new Chart(ctxStatus, {
    type: 'bar',
    data: {
      labels: ['Open', 'In Progress', 'Resolved'],
      datasets: [{
        label: 'Tickets',
        data: [0, 0, 0],
        backgroundColor: ['#6c757d', '#ffc107', '#28a745']
      }]
    },
    options: { responsive: true }
  });

  const ctxPriority = document.getElementById('priorityChart');
  new Chart(ctxPriority, {
    type: 'pie',
    data: {
      labels: ['Low', 'Medium', 'High'],
      datasets: [{
        data: [0, 0, 0],
        backgroundColor: ['#6c757d', '#17a2b8', '#dc3545']
      }]
    },
    options: { responsive: true }
  });
</script>
{% endblock %}
